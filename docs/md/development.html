<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Developer Guide · Perspective</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Thank you for your interest in contributing to Perspective! This guide will"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Developer Guide · Perspective"/><meta property="og:type" content="website"/><meta property="og:url" content="https://perspective.finos.org//index.html"/><meta property="og:description" content="Thank you for your interest in contributing to Perspective! This guide will"/><meta property="og:image" content="https://perspective.finos.org/img/perspective.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://perspective.finos.org/img/perspective.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Public+Sans"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.png" alt="Perspective"/><h2 class="headerTitleWithLogo">Perspective</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/md/js.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/finos/perspective/" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/md/js.html">JavaScript User Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/md/python.html">Python User Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/md/table.html">Table</a></li><li class="navListItem"><a class="navItem" href="/docs/md/view.html">View</a></li><li class="navListItem"><a class="navItem" href="/docs/md/server.html">Data Binding</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/md/development.html">Developer Guide</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Developer Guide</h1></header><article><div><span><p>Thank you for your interest in contributing to Perspective! This guide will
teach you everything you need to know to get started hacking on the Perspective
codebase.</p>
<p>If you're coming to this project as principally a JavaScript developer, please
be aware that Perspective is quite a bit more complex than a typical NPM package
due to the mixed-language nature of the project; we've done quite a bit to make
sure the newcomer experience is as straightforward as possible, but some things
might not work the way you're used to!</p>
<p>Perspective is organized as a
<a href="https://github.com/babel/babel/blob/master/doc/design/monorepo.md">monorepo</a>,
and uses <a href="https://lernajs.io/">lerna</a> to manage dependencies.</p>
<p>This guide provides instructions for both the JavaScript and Python libraries.
To switch your development toolchain between the two, use <code>yarn setup</code>. Once the
setup script has been run, common commands like <code>yarn build</code> and <code>yarn test</code>
automatically call the correct build and test tools.</p>
<h2><a class="anchor" aria-hidden="true" id="building"></a><a href="#building" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building</h2>
<p>To run a build, use</p>
<pre><code class="hljs css language-bash">yarn build
</code></pre>
<p>If this is the first time you've built Perspective, you'll be asked to generate
a <code>.perspectiverc</code> via a short survey. This can be later re-configured via</p>
<pre><code class="hljs css language-bash">yarn setup
</code></pre>
<p>If everything is successful, you should be able to run any of the <code>examples/</code>
packages, e.g. <code>examples/simple</code> like so:</p>
<pre><code class="hljs css language-bash">yarn start simple
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="docker"></a><a href="#docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Docker</h4>
<p><a href="https://docs.docker.com/install/">Docker</a> images with pre-built development
environments are provided for the Python libraries.</p>
<p>To build Perspective using Docker, select the option in <code>yarn setup</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="system-dependencies"></a><a href="#system-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>System Dependencies</h3>
<p><code>Perspective.js</code> and <code>perspective-python</code> <strong>require</strong> the following system dependencies to be installed:</p>
<ul>
<li><a href="https://cmake.org/">CMake</a> (version 3.15.4 or higher)</li>
<li><a href="https://www.boost.org/">Boost</a> (version 1.67 or higher, must be built - not header-only)</li>
<li><a href="https://google.github.io/flatbuffers/flatbuffers_guide_building.html">Flatbuffers</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="perspectivejs"></a><a href="#perspectivejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Perspective.js</code></h2>
<p>To build the JavaScript library, which includes WebAssembly compilation,
<a href="https://github.com/kripken/emscripten">Emscripten</a> and its prerequisites are
required.</p>
<p><code>Perspective.js</code> specifies its Emscripten version dependency in <code>package.json</code>,
and the correct version of Emscripten will be installed with other JS
dependencies by running <code>yarn</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="building-via-local-emsdk"></a><a href="#building-via-local-emsdk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building via local EMSDK</h4>
<p>To build using an Emscripten install on your local system and not the
Emscripten bundled with Perspective in its <code>package.json</code>,
<a href="https://emscripten.org/docs/getting_started/downloads.html">install</a> the
Emscripten SDK, then activate and export the latest <code>emsdk</code> environment via
<a href="https://github.com/juj/emsdk"><code>emsdk_env.sh</code></a>:</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">source</span> emsdk/emsdk_env.sh
</code></pre>
<p>We currently use Emscripten version <code>2.0.6</code> — deviating from this specific
version of Emscripten can introduce various errors that are extremely difficult
to debug.</p>
<p>To install this specific version of Emscripten:</p>
<pre><code class="hljs css language-bash">./emsdk install 2.0.6
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="perspective-jupyterlab"></a><a href="#perspective-jupyterlab" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>perspective-jupyterlab</code></h3>
<p>To install the Jupyterlab plugin from your local working directory, give
<code>jupyter labextension install</code> the path to the <code>perspective-jupyterlab</code>
package:</p>
<pre><code class="hljs css language-bash">jupyter labextension install ./packages/perspective-jupyterlab
</code></pre>
<p>Afterwards, you should see it listed as a &quot;local extension&quot; when you run
<code>jupyter labextension list</code>.</p>
<p>Because we do not inline Perspective into the Jupyterlab plugin, your local
changes will not show up in Jupyterlab <strong>unless</strong> you use <code>yarn link</code>
according to the directions below:</p>
<ol>
<li>Ensure that your Jupyterlab is built by running <code>jupyter lab build</code>.</li>
<li>Inside each directory in <code>packages</code>, run <a href="https://classic.yarnpkg.com/en/docs/cli/link"><code>yarn link</code></a>.
This will create a symlink to your local build that we will use inside Jupyterlab.</li>
<li>From the Perspective root, run <code>yarn jlab_link</code>. This is a script that will
find your Jupyterlab installation and tell Jupyterlab to use these symlinks
when it looks for Perspective packages, instead of fetching them from NPM.</li>
<li>When you make a local change, make sure you run <code>yarn build</code> <strong>and</strong>
<code>jupyter lab build</code> so that it fetches the newest changes.</li>
<li>Whenever you run <code>jupyter lab clean</code>, you will need to run <code>yarn jlab_link</code>
again to re-register the symlinks.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="perspective-python"></a><a href="#perspective-python" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>perspective-python</code></h2>
<p>To build the Python library, first configure your project to Python via
<code>yarn setup</code>, then run:</p>
<pre><code class="hljs css language-bash">yarn build
</code></pre>
<p><code>perspective-python</code> supports Python 3.7 and upwards, as well as Python 2.7.17.
To build the Python 2 version of the library, use the <code>--python2</code> flag:</p>
<pre><code class="hljs css language-bash">yarn build --python2
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="system-specific-instructions"></a><a href="#system-specific-instructions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>System-Specific Instructions</h2>
<h3><a class="anchor" aria-hidden="true" id="macososx"></a><a href="#macososx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MacOS/OSX</h3>
<p>Install system dependencies through Homebrew:</p>
<pre><code class="hljs css language-bash">brew install cmake
brew install boost@1.67
brew install flatbuffers
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="perspective-python-1"></a><a href="#perspective-python-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>perspective-python</code></h4>
<p>If you're building the Python 2 version of the library, make sure your version
of Python 2 is the latest version (<code>2.7.17</code>) supplied by Homebrew, and not the
earlier version that ships with MacOS. To install Python 2 using Homebrew:</p>
<pre><code class="hljs css language-bash">brew install python2
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="windows-10"></a><a href="#windows-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windows 10</h3>
<p>You need to use bash in order to build Perspective packages. To successfully
build on Windows 10, enable
<a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Windows Subsystem for Linux</a>
(WSL) and install the Linux distribution of your choice.</p>
<p>Create symbolic links to easily access Windows directories and projects modified
via Windows. This way, you can modify any of the Perspective files using your
favorite editors on Windows and build via Linux.</p>
<p>Follow the Linux specific instructions to install Emscripten and all
prerequisite tools.</p>
<h3><a class="anchor" aria-hidden="true" id="ubuntudebian"></a><a href="#ubuntudebian" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ubuntu/Debian</h3>
<p>On Ubuntu, CMake will mistakenly resolve the system headers in <code>/usr/include</code>
rather than the emscripten supplied versions. You can resolve this by moving
<code>boost</code> and <code>flatbuffers</code> dependencies to somewhere other than <code>/usr/include</code> -
into Perspective's own <code>src</code> dir (as per
<a href="http://vclf.blogspot.com/2014/08/emscripten-linking-to-boost-libraries.html">here</a>).</p>
<pre><code class="hljs css language-bash">apt-get install libboost-all-dev
cp -r /usr/include/boost ./packages/perspective/src/include/

<span class="hljs-built_in">cd</span> ./packages/perspective/src/include/
git <span class="hljs-built_in">clone</span> https://github.com/google/flatbuffers.git
<span class="hljs-built_in">cd</span> flatbuffers
cmake -G <span class="hljs-string">"Unix Makefiles"</span>
make
ln -s /usr/<span class="hljs-built_in">local</span>/flatbuffers/flatc /usr/<span class="hljs-built_in">local</span>/bin/flatc
chmod +x /usr/<span class="hljs-built_in">local</span>/flatbuffers/flatc
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="testing"></a><a href="#testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h2>
<p>You can run the test suite simply with the standard NPM command, which will both
build the test suite for every package and run them.</p>
<pre><code class="hljs css language-bash">yarn <span class="hljs-built_in">test</span> [--debug]
</code></pre>
<p>A test name regex can be passed to <code>jest</code> via the same <code>-t</code> flag:</p>
<pre><code class="hljs css language-bash">yarn <span class="hljs-built_in">test</span> -t <span class="hljs-string">'button test (A|B)'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="javascript"></a><a href="#javascript" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript</h3>
<p>The JavaScript test suite is composed of two sections: a Node.js test, which
asserts behavior of the <code>@finos/perspective</code> library, and a suite of
<a href="https://developers.google.com/web/tools/puppeteer/">Puppeteer</a> tests, which
assert the behavior of the rest of the UI facing packages. For the latter,
you'll need Docker installed, as these tests use a Puppeteer and Chrome build
installed in a Docker container.</p>
<p>The Puppeteer/UI tests are a form of
<a href="https://en.wikipedia.org/wiki/Characterization_test">characterization tests</a>
which use screenshots to compare current and previous behavior of
<code>&lt;perspective-viewer&gt;</code> and its plugins. The results of each comparison are
stored in each package's <code>test/results/results.json</code> file, and the screenshots
themselves are stored in the package's <code>screenshots/</code> directory, though only the
former should be checked into GIT. When a test in these suites fails, a
<code>file.failed.png</code> and <code>file.diff.png</code> are also generated, showing the divergent
screenshot and a contrast diff respectively, so you can verify that the changed
behavior either does or does not reflect your patch. If you're confident that
the screenshots reflect your change, you can update the new hashes manually in
the <code>test/results/results.json</code> file, or update all hashes with the <code>--wrte</code>
flag:</p>
<pre><code class="hljs css language-bash">yarn <span class="hljs-built_in">test</span> --write
</code></pre>
<p>For quick local iteration and debugging failing tests, the Puppeteer tests can
use a local copy of Puppeteer, rather than relying on the supplied Docker image.
These will run much quicker, and can be optionally run without <code>--headless</code> mode
for debugging test failures quickly. However, due to rendering inconsistencies
between platforms, the resulting test hashes will not match the ones saved in
<code>results.json</code>, so you will need to re-run the suite with the <code>--write</code> flag to
generate a <code>results.local.json</code> file specific to your OS.</p>
<p>To toggle between local and Docker Puppeteer, run</p>
<pre><code class="hljs css language-bash">yarn toggle_puppeteer
</code></pre>
<p>This will install a local copy of Puppeteer via <code>yarn</code> the first time it is run,
if a local Puppeteer is not found.</p>
<h3><a class="anchor" aria-hidden="true" id="python"></a><a href="#python" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Python</h3>
<p>The Python test suite is built on Pytest, and it asserts the correct behavior of
the Python library.</p>
<p>If you have built the library with the <code>--python2</code> flag, make sure to run the
test suite using the <code>--python2</code> flag as well. Running a version of
<code>perspective-python</code> built against Python 2 in Python 3 (and vice versa) is not
supported.</p>
<p>Verbosity in the tests can be enabled with the <code>--verbose</code> flag.</p>
<h3><a class="anchor" aria-hidden="true" id="troubleshooting-installation-from-source"></a><a href="#troubleshooting-installation-from-source" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Troubleshooting installation from source</h3>
<p>If you are installing from a source distribution (sdist), make sure you have
the <a href="#system-dependencies">System Dependencies</a> installed.</p>
<p>Try installing in verbose mode:</p>
<pre><code class="hljs css language-bash">pip install -vv perspective-python
</code></pre>
<p>The most common culprits are:</p>
<ul>
<li>CMake version too old</li>
<li>Boost headers are missing or too old</li>
<li>Flatbuffers not installed prior to installing Perspective</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="timezones-in-python-tests"></a><a href="#timezones-in-python-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Timezones in Python Tests</h4>
<p>Python tests are configured to use the <code>UTC</code> time zone. If running tests locally,
you might find that datetime-related tests fail to assert the correct values. To
correct this, run tests with the <code>TZ=UTC</code>, i.e.</p>
<pre><code class="hljs css language-bash">TZ=UTC yarn <span class="hljs-built_in">test</span> --verbose
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="benchmarking"></a><a href="#benchmarking" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Benchmarking</h2>
<p>You can generate benchmarks specific to your machine's OS and CPU architecture
with Perspective's benchmark suite, which will generate a <code>report.html</code> file in
the <code>build/</code> directory of every package which supports benchmarks, as well as a
<code>results.json</code> file in the <code>bench/results/</code>, which can be checked in to GIT with
your changes to preserve them for future comparison.</p>
<pre><code class="hljs css language-bash">yarn bench
</code></pre>
<p>The benchmarks report and <code>results.json</code> show a histogram of current
performance, as well as that of the previous <code>results.json</code>. Running this should
probably be standard practice after making a large change which may affect
performance, but please create a baseline <code>results.json</code> entry for your test
machine on a commit before your changes first, such that the effects of your PR
can be properly compared.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/md/server.html"><span class="arrow-prev">← </span><span>Data Binding</span></a><a class="docs-next button" href="/docs/obj/perspective.html"><span>Next</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#building">Building</a><ul class="toc-headings"><li><a href="#system-dependencies">System Dependencies</a></li></ul></li><li><a href="#perspectivejs"><code>Perspective.js</code></a><ul class="toc-headings"><li><a href="#perspective-jupyterlab"><code>perspective-jupyterlab</code></a></li></ul></li><li><a href="#perspective-python"><code>perspective-python</code></a></li><li><a href="#system-specific-instructions">System-Specific Instructions</a><ul class="toc-headings"><li><a href="#macososx">MacOS/OSX</a></li><li><a href="#windows-10">Windows 10</a></li><li><a href="#ubuntudebian">Ubuntu/Debian</a></li></ul></li><li><a href="#testing">Testing</a><ul class="toc-headings"><li><a href="#javascript">JavaScript</a></li><li><a href="#python">Python</a></li><li><a href="#troubleshooting-installation-from-source">Troubleshooting installation from source</a></li></ul></li><li><a href="#benchmarking">Benchmarking</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Docs</h5><a href="/docs/md/js.html">Javascript User Guide</a><a href="/docs/md/python.html">Python User Guide</a><a href="/docs/obj/perspective.html">Perspective API</a><a href="/docs/obj/perspective-viewer.html">Perspective Viewer API</a><a href="/docs/obj/perspective-python-table.html">Perspective Python API</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/finos/perspective/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2021 Perspective Authors</section></footer></div></body></html>